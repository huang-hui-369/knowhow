# キャンバス アプリ

## Power Apps Studio
Power Apps Studio は、アプリをビルドするために使用する Web インターフェイスの名前です。 Power Apps には、アプリをビルドするためにダウンロードまたはインストール行うクライアントがありません。 すべては、https://make.PowerApps.com にログインすることによって、ブラウザーから実行されます。

## ギャラリー
Gallery コントロールは、データのテーブルから行を表示するために使用されます。

## フォーム
フォームを使用すると、ユーザーは、詳細情報を表示できるだけでなく、新しいレコードを保存したり、既存のレコードを編集したりすることができます。 フォームで実行されるさまざまなアクションはフォーム モードによって制御され、フォームをさまざまな目的に使用できます。

#3 Input コントロール
Text input、Button、Dropdown、Toggle、Date picker、Slider は例の一部です。

## インテリジェント コントロール
Power Apps にはより高度な操作を行うための豊富なコントロール セットも用意されています。 カメラ、バー コード スキャナー、GPS、およびその他のハードウェア機能へのアクセスを可能にするハードウェア ベースのコントロールが用意されています。 また、名刺リーダーや物体検出など、コードを書かずにアプリに人工知能を追加できるサービスにサポートされたコントロールがあります。

## 関数
関数とは、これらのすべてのコントロール、入力、およびデータソースを結合する接着剤です。 1 つ以上の関数を使用して、アプリでフォーミュラを作成できます。

# キャンバス アプリを構築する

基本的な Power Apps の作成過程は次のようになります。

- Power Apps によって満たすことができる業務上のニーズを特定する

- Power Apps の必要なデータに接続する

- コントロール、ボタン、および使いやすいインターフェイスを使用してアプリを設計し、エンド ユーザーがデータを操作して業務上のニーズを満たすことを可能にする

- アプリとテストの機能を保存して公開する

- 問題がなければ、アプリをエンド ユーザーと共有し、より優れた業務プロセスを提供する

## データ ソースへの接続

データ ソースに接続するには、次の手順を使用します。

1. Contoso-Site-Tracking.zip(https://github.com/MicrosoftDocs/mslearn-build-app-solution/raw/master/downloads/Contoso-Site-Tracking.zip) ファイルをダウンロードし、すべてのファイルを抽出して、OneDrive for Business に保存します。

2. https://make.powerapps.com に移動して、自分の組織アカウントでサインインします。

3. 左側のウィンドウで、作成 を選択します。

4. データから開始 セクションで、その他のデータ ソース を選択します。

5. [接続] の下にある OneDrive for Business を選択します。 接続を使用できない場合は、新しい接続 をクリックして作成します。

6. 右の Excel ファイルの選択 には、Contoso Site Tracking.xlsx ファイルを選択します。

7. テーブルの選択 には、サイト検査官 をクリックして、接続 をクリックします。


Power Apps ではデータを検査し、データが Power Apps の機能に対応するようにアプリを生成するので、実際に機能するアプリを起点にすることができます。 生成されたアプリは常に、1 つのリストまたはテーブルを基にしていますが、後でアプリにデータをさらに追加できます。

# 3 画面アプリ

- 閲覧画面 - 既定では、この画面が表示されます。 ここでは、データ ソースのデータの参照、並べ替え、検索、更新ができます。 閲覧画面では、プラス記号 (+) を選択して、データ ソースに項目を追加できます。

- 詳細画面 - 詳細画面には、1 つの項目に関するすべての情報が表示されます。 この画面では、項目を開いて編集または削除することができます。

- 編集/作成画面 - この画面では、既存の項目を編集したり、新しい項目を作成したりできます。

# デバイスへのアプリのインストール

モバイル デバイスでのアプリの実行を確認するため、ご使用のスマートフォンに Power Apps Mobile アプリをインストールします。 アプリを構築するときは、ユーザーと同じフォーム ファクターでテストする必要があります。

1. 使用するプラットフォームのアプリ ストアから Power Apps Mobile をダウンロードします。

2. 自分のユーザー名とパスワードを使用してサインインします。

3. スマートフォンまたはタブレットで、Contoso Site Tracking アプリ を Power Apps Mobile で実行します。 アプリをインストールしない場合は、ブラウザーで実行できます。

作成しているアプリがモバイル デバイスで使用される場合は、Power App がモバイルでどのように表示および実行されるかを確認して、最適なエクスペリエンスをユーザーに提供することをお勧めします。

# Power Apps での関数の開始方法

アプリのロジックを表現し、そのナビゲーション、フィルター処理、並べ替えなどの機能を制御する必要があります。 そのために式が取り入れられています。

- フィルター: この関数は、データ ソースから返された行を絞り込むためにギャラリーやテーブルのデータでよく使用されます。 これを行うには、データ セットでロジックをテストする 1 つ以上の列を指定します。これにより、特定の日付範囲、設定された値、ユーザーによって作成されたデータなどを返すことができます。

- 一致: この関数では、値が特定のパターンに従っているかどうかを確認できます。 これを使用すると、ユーザーが適切な形式のメール アドレスを入力したかどうかを確認し、入力していない場合は適切な形式のメール アドレスが必要であるという警告を表示することができます。 この機能は、条件付き書式の確認に役立ちます。

- 重複除外: この関数を使用すると、データのリストから一意の値を返すことができます。そのため、特定の列の有効な値のみをユーザーに表示する動的なドロップダウンを簡単に作成できます。

- 数学関数: Power Apps には、Sum や Average などの単純なものから、ラジアンで使用する Atan や Sin などの複雑なものまで、データを処理するためのさまざまな計算式が用意されています。

# アプリの共有

1. [共有] タブで、アプリを共有するユーザーまたはグループを指定します。 組織内のすべてのユーザーを追加するには、会社名 の すべてのユーザー を選択します。 大勢のユーザーと共有する必要がある場合、ベスト プラクティスとして Azure Active Directory セキュリティ グループで共有するとよいでしょう。

既定では、ユーザーはユーザー アクセス許可を受け取ります。 ユーザーにアプリの編集も許可する場合は、[共同所有者] チェック ボックスをオンにします。 次の説明は両方のアクセス許可についてです。

- 共同所有者 - ユーザーはアプリを使用、編集、および共有できますが、所有者を削除または変更することはできません。

- ユーザー - ユーザーはアプリを表示および使用できますが、変更することはできません。

2. セキュリティ グループを考慮する。

アプリをセキュリティ グループと共有する場合、そのグループの既存のメンバーと、それに参加するすべてのユーザーは、グループに指定されたアクセス許可を持ちます。 グループから離脱したすべてのユーザーは、アクセス権を持つ別のグループに属しているか、または個人としてアクセス許可を付与された場合を除き、アクセス許可を失います。

セキュリティ グループのすべてのメンバーは、アプリに対してグループ全体が持つのと同じアクセス許可を持っています。 ただし、グループの 1 人または複数のメンバーに、より高いアクセス許可を指定することで、アクセス レベルを高めることができます。 たとえば、セキュリティ グループ A に対して、アプリを実行するアクセス許可を付与しながら、そのグループに属するユーザー B に対して、共同所有者アクセス許可を付与することができます。 セキュリティ グループのすべてのメンバーがアプリを実行できますが、編集を行うことができるのはユーザー B だけです。 セキュリティ グループ A に対して共同所有者アクセス許可を付与し、ユーザー B に対してアプリを実行するアクセス許可を付与した場合でも、ユーザー B はアプリを編集できます。

3. ユーザーにメールで通知するには、招待メールを送信する チェック ボックスをオンにします。

ユーザーにメールで通知するよう選択した場合、アプリを共有しているすべてのユーザーが、アプリへのリンクを含むメール メッセージを受け取ります。 アプリの 共同所有者 アクセス許可を付与されたすべてのユーザーは、Power Apps Studio のアプリ編集へのリンクも受信します。

4. 共有 をクリックします。

共有アプリを変更して保存すると、公開後すぐに、アプリを共有しているユーザーに変更が表示されます。 これはアプリを改善した場合は有用ですが、機能を削除したり、大幅に変更したりした場合は、ユーザーに影響を与える可能性があります。 通知計画を作成し、重要な更新をユーザーに通知してください。

## アクセス許可とライセンス
アクセス許可とライセンスについて知っておくべき基本情報を次に示します。

- ユーザーと共同作成者は、共有アプリで使用されるすべてのデータ接続とゲートウェイへのアクセス許可が必要です。
- 一部のアクセス許可は暗黙的にアプリに付与されていますが、それ以外は明示的に付与する必要があります。
- Microsoft Dataverse に基づいてアプリを作成する場合、アプリを共有しているユーザーが、アプリが依存している 1 つまたは複数のテーブルに対して適切なアクセス許可を持っているかを確認する必要があります。 具体的には、ユーザーは、関連する行の作成、読み取り、書き込み、削除などのタスクを実行できるセキュリティ ロールに属していなければなりません。
- 多くの場合、アクセス許可を持つ 1 つまたは複数のカスタム **セキュリティ ロール**を作成します。それは、アプリを実行するためにユーザーが必要とするものです。 そして、必要に応じて各ユーザーにロールを割り当てることができます。
アプリの共有はシンプルで、有用と思われるアプリを組織全体のユーザーが利用できるようにするための優れた方法です。

# リソース

https://docs.microsoft.com/ja-jp/learn/modules/build-app-solution/7-summary-resources