# Oracle一時表

Oracle一時表创建完成后，表结构是一直存在的，不会被删除。但是数据会被删除。有两种类型。

- トランザクション終了時にデータを削除する

  ```sql
   CREATE GLOBAL TEMPORARY TABLE "schema1"."TMP_TABLE1"						
     (    "CODE" NUMBER(2,0)						
     ) ON COMMIT DELETE ROWS ;						
  						
  
  ```

  

- セッション終了時にデータを削除する

  ```sql
    CREATE GLOBAL TEMPORARY TABLE "schema1"."TMP_TABLE2"						
     (    "CODE" NUMBER(2,0)						
     ) on commit preserve rows ;						
  
  ```

  # SS一時表

  セッションが終了するとテーブルデータとテーブル自体も自動的に削除されます。（一時表はメモリ上に存在する）

  - ローカル一時表

    一時テーブルを作成したセッションのみから参照できる.セッションが終わったらテーブルデータとテーブル自体が自動的に削除されます。

    ```sql
    CREATE TABLE #Temp	
    (	
        id int,	
        customer_name nvarchar(50),	
        age int	
    )	
    ```

    ローカル一時表の削除

    ```SQL
    IF OBJECT_ID(N'tempdb..#TEMP_TABLE', N'U') IS NOT NULL				
        DROP TABLE #TEMP_TABLE				
    ```

    

  - グローバル一時表

    別セッションからも参照でき、全ての参照がなくなったときに自動的に削除される

    ```sql
    CREATE TABLE ##Temp		
    (		
        id int,		
        customer_name nvarchar(50),		
        age int		
    )		
    ```

    

